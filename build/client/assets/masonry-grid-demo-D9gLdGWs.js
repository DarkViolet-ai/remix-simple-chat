import{r as n,j as o}from"./jsx-runtime-BfF-YriY.js";import{B as R}from"./box-BdT0KxCu.js";import{M as j}from"./inifiniteScrollDemoComponents-B_ssEQFC.js";import{V as d}from"./vStackFull-BVjnb3Lo.js";import{f as p,a as y,R as v,F as S}from"./hStackFull-CFb3YDvE.js";import{a as g}from"./transition-DVSgZb6N.js";import"./flex-COvQVarW.js";import"./image-DzzBi0M2.js";import"./vStack-xcuHHABo.js";import"./components-BL27QBWM.js";const E=e=>{if(e>=1920){const t=e*.25;return{viewportWidth:e,rowHeight:t,itemsPerRow:4}}if(e>=1280){const t=e*.333;return{viewportWidth:e,rowHeight:t,itemsPerRow:3}}if(e>=768){const t=e*.5;return{viewportWidth:e,rowHeight:t,itemsPerRow:2}}if(e>=640){const t=e*.8;return{viewportWidth:e,rowHeight:t,itemsPerRow:1}}{const t=e*.98;return{viewportWidth:e,rowHeight:t,itemsPerRow:1}}},P=()=>{const[e,t]=n.useState({width:0,height:0});return n.useEffect(()=>{if(typeof window<"u"){const s=()=>{t({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",s),s(),()=>window.removeEventListener("resize",s)}},[]),e};function I(){const{width:e}=P(),{viewportWidth:t,itemsPerRow:s}=E(e);return o.jsxs(p,{className:"fixed z-50 bottom-0 right-0  bg-col-980 rounded-none text-col-100 text-xs-normal md:text-lg xl:text-xl justify-around px-[1vh]",gap:"gap-[2vh]",children:[o.jsxs(g,{children:["window width: ",t,"px"]}),o.jsxs(g,{children:["items per row: ",s]})]})}const x=["h-[30vh]","h-[35vh]","h-[40vh]","h-[45vh]","h-[50vh]","h-[55vh]","h-[60vh]"],w=(e,t=20)=>Array.from({length:t},(s,l)=>{const m=Math.floor(Math.random()*100)+1;return{id:e+l,image:`https://picsum.photos/seed/${m}/500/900`,height:x[Math.floor(Math.random()*x.length)]}});function M(){const[e,t]=n.useState([]),[s,l]=n.useState(!1),[m,b]=n.useState(new Set),a=n.useRef([]);return n.useEffect(()=>{t(w(0))},[]),n.useEffect(()=>{const i=new IntersectionObserver(r=>{r.forEach(u=>{const c=Number(u.target.getAttribute("data-id"));b(h=>{const f=new Set(h);return u.isIntersecting?f.add(c):f.delete(c),f})})},{rootMargin:"0px",threshold:.1});return a.current.forEach(r=>{r&&i.observe(r)}),()=>{a.current.forEach(r=>{r&&i.unobserve(r)})}},[e]),n.useEffect(()=>{console.log("Visible Items:",Array.from(m).map(i=>`${i}`))},[m]),n.useEffect(()=>{const i=new IntersectionObserver(u=>{u[0].isIntersecting&&!s&&(l(!0),setTimeout(()=>{t(c=>{const h=[...c,...w(c.length)];return a.current=a.current.slice(0,c.length).concat(new Array(h.length-c.length).fill(null)),h}),l(!1)},1500))},{rootMargin:"100px"}),r=document.querySelector("#scroll-down-trigger");return r&&i.observe(r),()=>{r&&i.unobserve(r)}},[s]),o.jsxs(d,{className:"items-center h-full pt-[6vh] bg-900-radial2op75",children:[o.jsxs(p,{className:"fixed top-0 left-0 h-[6vh] px-[1.5vh] bg-900-radial3op50 rounded-none shadowNarrowTight justify-between items-center",children:[o.jsx(y,{icon:v,to:"/design#components"}),o.jsx(S,{className:"md:text-xl-tight font-semibold justify-center text-col-100 textShadow",children:"Remix/Tailwind Infinite Scroll Masonry Grid"})]}),o.jsx(I,{}),o.jsxs(d,{className:"h-[94vh] overflow-y-auto p-[1vh]",children:[o.jsx(R,{className:"w-full h-fit columns-1 md:columns-2 xl:columns-3 fullHD:columns-4 gap-0",children:e.map((i,r)=>o.jsx(j,{item:i,itemRefs:a,index:r},r))}),!s&&o.jsx("div",{id:"scroll-down-trigger",style:{height:"20px"}})]})]})}function k(){return o.jsx(M,{})}export{k as default};
