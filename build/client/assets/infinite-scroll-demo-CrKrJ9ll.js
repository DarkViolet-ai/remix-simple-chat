import{r,j as e}from"./jsx-runtime-BfF-YriY.js";import{W as j,B as b}from"./wrap-SIAqqN24.js";import{F as u}from"./flex-COvQVarW.js";import{T as v,L as w}from"./inifiniteScrollDemoComponents-B_ssEQFC.js";import{a as x}from"./transition-DVSgZb6N.js";import{a as y,R as I,f as N,F as S,H as E}from"./hStackFull-CFb3YDvE.js";import"./box-BdT0KxCu.js";import"./image-DzzBi0M2.js";import"./vStack-xcuHHABo.js";import"./components-BL27QBWM.js";const g=(o,c=20)=>Array.from({length:c},(i,a)=>({id:o+a,text:`Item ${o+a}`}));function F(){const[o,c]=r.useState([]),[i,a]=r.useState(!1),[h,p]=r.useState(new Set),l=r.useRef([]);return r.useEffect(()=>{c(g(0))},[]),r.useEffect(()=>{const s=new IntersectionObserver(t=>{t.forEach(m=>{const n=Number(m.target.getAttribute("data-id"));p(f=>{const d=new Set(f);return m.isIntersecting?d.add(n):d.delete(n),d})})},{rootMargin:"0px",threshold:.1});return l.current.forEach(t=>{t&&s.observe(t)}),()=>{l.current.forEach(t=>{t&&s.unobserve(t)})}},[o]),r.useEffect(()=>{console.log("Visible Items:",Array.from(h).map(s=>`${s}`))},[h]),r.useEffect(()=>{const s=new IntersectionObserver(m=>{m[0].isIntersecting&&!i&&(a(!0),setTimeout(()=>{c(n=>{const f=[...n,...g(n.length)];return l.current=l.current.slice(0,n.length).concat(new Array(f.length-n.length).fill(null)),f}),a(!1)},2500))},{rootMargin:"100px"}),t=document.querySelector("#scroll-down-trigger");return t&&s.observe(t),()=>{t&&s.unobserve(t)}},[i]),e.jsxs(e.Fragment,{children:[e.jsxs(u,{className:"fixed top-0 left-0 h-[6vh] bg-100-radial1op75 rounded-none text-col-900 w-full text-center shadowNarrowTight justify-center items-center gap-[2vh]",children:[e.jsx(u,{className:"w-[8vw] justify-center flex-shrink-0",children:e.jsx(y,{icon:I,to:"/design#components"})}),e.jsxs(N,{className:"h-full justify-center items-center",children:[e.jsx(u,{className:"w-35% justify-end boldTextGlow ",children:e.jsx(x,{className:"text-md-tighter",children:"Intersection Observer - "})}),e.jsx(u,{className:"w-65% text-left items-end",children:e.jsxs(x,{className:"text-md-tight lightTextShadow font-semibold h-full",children:["items: ",Array.from(h).map(s=>`${s} | `)]})})]})]}),e.jsxs(j,{className:"justify-around items-start gap-5vh px-[2vh] pt-[7vh] gap-y-[1vh] h-[100vh] overflow-y-auto bg-100-linear6op75",children:[o.map((s,t)=>e.jsx(v,{item:s,itemRefs:l,index:t},t)),!i&&e.jsx("div",{id:"scroll-down-trigger",style:{height:"20px"}}),e.jsx(S,{className:"justify-center pb-[2vh]",children:e.jsx(w,{children:i&&e.jsxs(E,{children:[e.jsx(x,{className:"text-lg-tight",children:"Loading more items..."}),e.jsx(b,{})]})})})]})]})}function D(){return e.jsx(F,{})}export{D as default};
